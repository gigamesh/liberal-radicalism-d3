{"version":3,"sources":["d3/config.js","d3/createNodes.js","d3/simulation.js","d3/bubbleHandlers.js","d3/render.js","d3/chart.js","components/Chart.js","components/Button.js","components/View0.js","components/View1.js","components/View2.js","components/Modal.js","components/sideText.js","components/SideBox.js","components/LandscapeMessage.js","helpers/helpers.js","dataBuilder.js","components/Buttons.js","App.js","serviceWorker.js","index.js"],"names":["donationColors","screenHeight","window","innerHeight","screenWidth","innerWidth","chartWidth","Math","min","chartHeight","tierColumnWidth","max","topPad","bottomPad","chartCenter","x","y","candidates","Bernie Sanders","Hillary Clinton","Martin O'Malley","tierLevels","twoThouToLimitAmount","text","oneThouTo2000Amount","fiveHundredTo1000Amount","twoHundredTo500Amount","fiftyTo200Amount","zeroTo50Amount","tierScale","scaleLinear","domain","range","Object","keys","forEach","k","i","forceStrength","charge","d","pow","radius","scaleMatrix","s","centerX","centerY","concat","wait","delay","Promise","res","setTimeout","createNodes","rawData","radiusScale","scaleSqrt","chart","maxAmount","myNodes","map","a","random","PI","r","sqrt","id","size","name","tier","cos","sin","sort","b","frame","bubbles","attr","initSimulation","sim","forceSimulation","force","forceX","strength","forceManyBody","on","stop","groupBubbles","alpha","decay","svg","selectAll","remove","simulation","velocityDecay","forceY","restart","_callee","_args","arguments","regenerator_default","wrap","_context","prev","next","length","undefined","showTierLabels","allBubblesGroup","transition","duration","tierLabels","data","enter","append","key","toggleDonationGroups","activeDonationBtn","_splitBubbles","apply","this","splitBubbles","render","init","domNode","fillColor","scaleOrdinal","select","nodes","currentView","animDelay","bubblesE","rgb","darker","merge","classed","names","match","showCandidates","ChartContainer","styled","div","_templateObject","Chart","props","chartData","react_default","createElement","Component","button","Button_templateObject","View0","Wrap","View1_templateObject","Quote","blockquote","_templateObject2","Cite","cite","_templateObject3","ImgBlock","View2_templateObject","Views","Fragment","src","transitionStyles","entering","opacity","entered","FullWrap","Modal_templateObject","InnerWrap","Modal_templateObject2","WithBtnWrap","Modal_templateObject3","ContentWrap","_templateObject4","_ref","display","Btn","Button","_templateObject5","Modal","state","show","_this$props","inProp","in","continueHandler","Transition_default","timeout","unmountOnExit","style","objectSpread","Fade_default","left","opposite","when","collapse","num","CurrentView","nextView","onClick","React","sideText","2","3","4","Container","SideBox_templateObject","_ref2","SideBox","_ref3","sideBoxShowing","console","log","dangerouslySetInnerHTML","__html","LandscapeMessage_templateObject","LandscapeMessage","LandscapeMessage_Wrap","debounce","func","immediate","context","args","callNow","clearTimeout","document","documentElement","clientHeight","clientWidth","Toolbar","Buttons_templateObject","height","Buttons","footerHeight","donationButtonHandler","className","MainTitle","h1","App_templateObject","App","modalShowing","landscape","chartLoaded","checkOrientation","_this","setState","e","target","newView","scrollTo","addEventListener","_this$state2","windowHeight","Chart_Chart","components_Modal","position","bottom","Boolean","location","hostname","root","getElementById","ReactDOM","src_App","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.72422216.chunk.js","sourcesContent":["import { scaleLinear } from \"d3-scale\";\r\nimport chart from \"./chart\";\r\nimport { max } from \"d3-array\";\r\n\r\nexport const donationColors = [\r\n  \"#D2F4B7\",\r\n  \"#C4E7A8\",\r\n  \"#B5D999\",\r\n  \"#98BF7B\",\r\n  \"#7BA45D\",\r\n  \"#507C30\"\r\n];\r\n\r\nexport const screenHeight = window.innerHeight;\r\nexport const screenWidth = window.innerWidth;\r\nexport const chartWidth = Math.min(screenWidth * 0.62, 1400);\r\nexport const chartHeight = screenHeight * 0.8;\r\nexport const tierColumnWidth = Math.max(chartWidth * 0.17, 110);\r\nexport const topPad = chartHeight * 0.22;\r\nexport const bottomPad = chartHeight * 0.12;\r\n\r\n// Locations to move bubbles towards, depending\r\n// on which view mode is selected.\r\nexport const center = { x: screenWidth / 2, y: screenHeight / 2 };\r\nexport const chartCenter = {\r\n  x: (chartWidth - tierColumnWidth) / 2 + tierColumnWidth,\r\n  y: chartHeight / 2\r\n};\r\n\r\nexport const candidates = {\r\n  \"Bernie Sanders\": { x: chartCenter.x - (chartWidth - tierColumnWidth) / 3 },\r\n  \"Hillary Clinton\": { x: chartCenter.x },\r\n  \"Martin O'Malley\": { x: chartCenter.x + (chartWidth - tierColumnWidth) / 3 }\r\n};\r\n\r\nexport const tierLevels = {\r\n  twoThouToLimitAmount: {\r\n    text: \"$2k - $2,700 (limit)\"\r\n  },\r\n  oneThouTo2000Amount: {\r\n    text: \"$1k - $1999.99\"\r\n  },\r\n  fiveHundredTo1000Amount: {\r\n    text: \"$500 - 999.99\"\r\n  },\r\n  twoHundredTo500Amount: {\r\n    text: \"$200 - 499.99\"\r\n  },\r\n  fiftyTo200Amount: {\r\n    text: \"$50 - 199.99\"\r\n  },\r\n  zeroTo50Amount: {\r\n    text: \"$0 - 49.99\"\r\n  }\r\n};\r\n\r\nexport const tierScale = scaleLinear()\r\n  .domain([0, 5])\r\n  .range([topPad, chartHeight - bottomPad]);\r\n\r\nexport const tierLevelKeys = Object.keys(tierLevels);\r\ntierLevelKeys.forEach((k, i) => {\r\n  tierLevels[k].y = tierScale(i);\r\n});\r\n\r\n// @v4 strength to apply to the position forces\r\nexport const forceStrength = 0.07;\r\n\r\nexport function charge(d) {\r\n  return -Math.pow(d.radius, 2) * forceStrength;\r\n}\r\n\r\nexport function maxAmount(data) {\r\n  return max(data, function(d) {\r\n    return +d.size;\r\n  });\r\n}\r\n\r\nexport function scaleMatrix(s) {\r\n  let centerX = chartWidth / 2;\r\n  let centerY = chartHeight / 2;\r\n\r\n  return `matrix(${s}, 0, 0, ${s}, ${centerX - s * centerX}, ${centerY -\r\n    s * centerY})`;\r\n}\r\n\r\nexport function wait(delay) {\r\n  return new Promise(res => {\r\n    setTimeout(() => {\r\n      res();\r\n    }, delay);\r\n  });\r\n}\r\n","import { scaleSqrt } from \"d3-scale\";\r\nimport chart from \"./chart\";\r\nimport { tierLevels, chartWidth, chartHeight } from \"./config\";\r\n\r\nfunction createNodes(rawData) {\r\n  const centerX = chartWidth / 2;\r\n  const centerY = chartHeight / 2;\r\n\r\n  const radiusScale = scaleSqrt()\r\n    .domain([0, chart.maxAmount])\r\n    .range([0, chartHeight * 0.022]);\r\n\r\n  const myNodes = rawData.map(function(d, i) {\r\n    let a = Math.random() * 2 * Math.PI;\r\n    let r = Math.sqrt(~~(Math.random() * chartHeight ** 2));\r\n    return {\r\n      id: d.id,\r\n      radius: radiusScale(+d.size),\r\n      size: +d.size,\r\n      name: d.name,\r\n      text: tierLevels[d.tier].text,\r\n      tier: d.tier,\r\n      x: centerX + r * Math.cos(a),\r\n      y: centerY + r * Math.sin(a)\r\n    };\r\n  });\r\n\r\n  // sort them to prevent occlusion of smaller nodes.\r\n  myNodes.sort(function(a, b) {\r\n    return b.radius - a.radius;\r\n  });\r\n\r\n  return myNodes;\r\n}\r\n\r\nexport default createNodes;\r\n","import { forceSimulation, forceX, forceManyBody } from \"d3-force\";\r\nimport chart from \"./chart\";\r\nimport { forceStrength, charge, chartWidth } from \"./config\";\r\n\r\n// generates force simulator based on x & y position\r\n\r\nfunction initSimulation() {\r\n  const sim = forceSimulation()\r\n    .force(\r\n      \"x\",\r\n      forceX()\r\n        .strength(forceStrength)\r\n        .x(chartWidth / 2)\r\n    )\r\n    .force(\"charge\", forceManyBody().strength(charge))\r\n    .on(\"tick\", frame);\r\n\r\n  // @v4 Force starts up automatically,\r\n  //  which we don't want as there aren't any nodes yet.\r\n  sim.stop();\r\n  return sim;\r\n}\r\n\r\nfunction frame() {\r\n  chart.bubbles\r\n    .attr(\"cx\", function(d) {\r\n      return d.x;\r\n    })\r\n    .attr(\"cy\", function(d) {\r\n      return d.y;\r\n    });\r\n}\r\n\r\nexport default initSimulation;\r\n","import { forceX, forceY } from \"d3-force\";\r\nimport chart from \"./chart\";\r\nimport {\r\n  forceStrength,\r\n  tierLevels,\r\n  scaleMatrix,\r\n  candidates,\r\n  chartHeight,\r\n  tierColumnWidth,\r\n  wait\r\n} from \"./config\";\r\n\r\nexport function groupBubbles(alpha, decay) {\r\n  const centerY = chartHeight / 2;\r\n\r\n  hideTierLabels();\r\n\r\n  chart.simulation.velocityDecay(decay).force(\r\n    \"y\",\r\n    forceY()\r\n      .strength(forceStrength)\r\n      .y(centerY)\r\n  );\r\n\r\n  // @v4 We can reset the alpha value and restart the simulation\r\n  chart.simulation.alpha(alpha).restart();\r\n}\r\n\r\nexport async function splitBubbles(delay = 0) {\r\n  await wait(delay);\r\n  showTierLabels();\r\n  chart.allBubblesGroup\r\n    .transition()\r\n    .duration(200)\r\n    .attr(\"transform\", scaleMatrix(1));\r\n\r\n  chart.simulation\r\n    .velocityDecay(0.2)\r\n    .force(\r\n      \"y\",\r\n      forceY()\r\n        .strength(forceStrength)\r\n        .y(d => {\r\n          return tierLevels[d.tier].y;\r\n        })\r\n    )\r\n    .force(\r\n      \"x\",\r\n      forceX()\r\n        .strength(forceStrength)\r\n        .x(d => {\r\n          return candidates[d.name].x;\r\n        })\r\n    );\r\n\r\n  // @v4 We can reset the alpha value and restart the simulation\r\n  chart.simulation.alpha(1).restart();\r\n}\r\n\r\nexport function hideTierLabels() {\r\n  chart.svg.selectAll(\".tier-label\").remove();\r\n}\r\n\r\nexport function showTierLabels() {\r\n  let tierLabels = Object.keys(tierLevels);\r\n\r\n  const tierTitle = chart.svg.selectAll(\".tier-label\").data(tierLabels);\r\n\r\n  tierTitle\r\n    .enter()\r\n    .append(\"text\")\r\n    .attr(\"class\", \"tier-label\")\r\n    .attr(\"y\", key => tierLevels[key].y)\r\n    .attr(\"x\", tierColumnWidth)\r\n    .attr(\"text-anchor\", \"end\")\r\n    .text(d => tierLevels[d].text);\r\n}\r\n\r\nexport function toggleDonationGroups(activeDonationBtn, delay) {\r\n  if (activeDonationBtn === \"donation_tiers\") {\r\n    splitBubbles(delay);\r\n  } else {\r\n    groupBubbles(1, 0.12);\r\n  }\r\n}\r\n","import { rgb } from \"d3-color\";\r\n// import { selection, select as d3Select } from 'd3-selection';\r\nimport \"d3-transition\";\r\nimport {\r\n  candidates,\r\n  screenWidth,\r\n  screenHeight,\r\n  chartWidth,\r\n  chartHeight\r\n} from \"./config\";\r\nimport { groupBubbles, toggleDonationGroups } from \"./bubbleHandlers\";\r\nimport chart from \"./chart\";\r\n\r\nfunction render(currentView, activeDonationBtn, animDelay) {\r\n  this.svg.attr(\"width\", chartWidth).attr(\"height\", chartHeight);\r\n\r\n  this.bubbles = this.allBubblesGroup\r\n    .selectAll(\"circle\")\r\n    .data(this.nodes, function(d) {\r\n      return d.id;\r\n    });\r\n\r\n  const bubblesE = this.bubbles\r\n    .enter()\r\n    .append(\"circle\")\r\n    .attr(\"r\", 0)\r\n    .attr(\"fill\", function(d) {\r\n      return chart.fillColor(+d.size);\r\n    })\r\n    .attr(\"stroke\", function(d) {\r\n      return rgb(chart.fillColor(+d.size)).darker([3]);\r\n    })\r\n    .attr(\"stroke-width\", 0.5);\r\n\r\n  this.bubbles = this.bubbles.merge(bubblesE);\r\n\r\n  this.bubbles\r\n    .transition()\r\n    .duration(1200)\r\n    .attr(\"r\", function(d) {\r\n      return d.radius;\r\n    });\r\n\r\n  this.simulation.nodes(this.nodes);\r\n\r\n  switch (currentView) {\r\n    case 0:\r\n      groupBubbles(1, 0.4);\r\n      break;\r\n    case 1:\r\n      this.svg.classed(\"downscale\", true);\r\n      // this.svg.style(\"transition\", \"transform 500ms ease-in-out\");\r\n\r\n      break;\r\n    case 2:\r\n      this.svg.classed(\"left-side\", true);\r\n      showCandidates();\r\n      toggleDonationGroups(activeDonationBtn, animDelay);\r\n      break;\r\n    default:\r\n  }\r\n}\r\n\r\nfunction showCandidates() {\r\n  // Add the candidate names\r\n  let names = Object.keys(candidates);\r\n\r\n  const candidateTitle = chart.svg.selectAll(\".candidate\").data(names);\r\n\r\n  candidateTitle\r\n    .enter()\r\n    .append(\"text\")\r\n    .attr(\"class\", \"candidate\")\r\n    .attr(\"x\", function(d) {\r\n      return candidates[d].x;\r\n    })\r\n    .attr(\"y\", 20)\r\n    .attr(\"text-anchor\", \"middle\")\r\n    .text(function(d) {\r\n      if (screenWidth < 600) {\r\n        return d.match(/[^ ]* (.*)/)[1];\r\n      } else return d;\r\n    });\r\n}\r\n\r\nexport default render;\r\n","/*\r\n * Code adapted from:\r\n * http://vallandingham.me/gates_bubbles/\r\n *\r\n */\r\nimport { select } from \"d3-selection\";\r\nimport { scaleOrdinal } from \"d3-scale\";\r\nimport createNodes from \"./createNodes\";\r\nimport initSimulation from \"./simulation\";\r\nimport { maxAmount, donationColors } from \"./config\";\r\nimport render from \"./render\";\r\n\r\nconst chart = {\r\n  init: function(domNode, rawData) {\r\n    this.maxAmount = maxAmount(rawData);\r\n\r\n    this.fillColor = scaleOrdinal()\r\n      .domain([2700, 2000, 1000, 500, 200, 50])\r\n      .range(donationColors);\r\n\r\n    this.simulation = initSimulation();\r\n\r\n    this.svg = select(domNode).append(\"svg\");\r\n\r\n    this.nodes = createNodes(rawData);\r\n\r\n    this.allBubblesGroup = this.svg.append(\"g\");\r\n    // .attr(\"transform\", scaleMatrix(2));\r\n\r\n    this.bubbles = null;\r\n  },\r\n  render\r\n};\r\n\r\nexport default chart;\r\n","import React, { Component } from \"react\";\r\nimport styled from \"@emotion/styled\";\r\nimport chart from \"../d3/chart\";\r\n\r\nconst ChartContainer = styled.div`\r\n  position: fixed;\r\n  left: 0;\r\n  top: 0;\r\n  display: flex;\r\n  /* justify-content: center; */\r\n  align-items: center;\r\n  margin: 0 auto;\r\n  height: 100vh;\r\n  width: 100vw;\r\n  z-index: -1;\r\n`;\r\n\r\nexport default class Chart extends Component {\r\n  componentDidMount() {\r\n    chart.init(\"#vis\", this.props.chartData);\r\n  }\r\n\r\n  shouldComponentUpdate() {\r\n    return false;\r\n  }\r\n\r\n  render() {\r\n    return <ChartContainer id=\"vis\" />;\r\n  }\r\n}\r\n","import styled from \"styled-components\";\r\n\r\nexport default styled.button`\r\n  display: block;\r\n  position: relative;\r\n  border: 1px solid #555;\r\n  z-index: 5;\r\n  font-size: 1.5rem;\r\n  padding: 0.5rem;\r\n  height: 3rem;\r\n  background: #fff;\r\n  font-family: inherit;\r\n  border-radius: 3px;\r\n  cursor: pointer;\r\n`;\r\n","import React from \"react\";\r\n\r\nexport default () => (\r\n  <div>\r\n    <h1>liberal radicalism</h1>\r\n    <p>\r\n      Liberal Radicalism (a.k.a. Quadratic Finance) is a mechanism for optimally\r\n      funding public goods through seed grants, developed in 2018 by Vitalik\r\n      Buterin, ZoÃ« Hitzig and E. Glen Weyl.\r\n    </p>\r\n    <p>\r\n      It has the potential to significantly alleviate the Free-rider Problem of\r\n      underprovisioning vital public goods such as infrastructure, open-source\r\n      software, scientific research, journalism, and political campaigns.\r\n    </p>\r\n    <p>\r\n      This presentation is an attempt to explain its power using data from the\r\n      United States 2016 Democratic Primary for President.\r\n    </p>\r\n  </div>\r\n);\r\n","import React from \"react\";\r\nimport styled from \"@emotion/styled\";\r\n\r\nconst Wrap = styled.div`\r\n  max-width: 500px;\r\n`;\r\n\r\nconst Quote = styled.blockquote`\r\n  position: relative;\r\n  font-size: 1.8rem;\r\n  font-style: italic;\r\n  line-height: 2.6rem;\r\n  text-align: justify;\r\n  margin-right: 0;\r\n`;\r\n\r\nconst Cite = styled.cite`\r\n  display: inline-block;\r\n  width: 100%;\r\n  font-size: 1.7rem;\r\n  text-align: right;\r\n  font-style: normal;\r\n`;\r\n\r\nexport default () => (\r\n  <Wrap>\r\n    <Quote>\r\n      Act only in accordance with that maxim through which you can at the same\r\n      time will that it become a universal law.\r\n    </Quote>\r\n    <Cite>Immanuel Kant</Cite>\r\n  </Wrap>\r\n);\r\n","import React from \"react\";\r\nimport styled from \"@emotion/styled\";\r\n\r\nconst ImgBlock = styled.div`\r\n  display: flex;\r\n  justify-content: center;\r\n`;\r\n\r\nexport default () => (\r\n  <React.Fragment>\r\n    {/* <h1>The Problem</h1> */}\r\n    <ImgBlock>\r\n      <img src=\"img/preferences-avg.png\" />\r\n      <img src=\"img/preferences-elite.png\" />\r\n    </ImgBlock>\r\n  </React.Fragment>\r\n);\r\n","import React from \"react\";\r\nimport styled from \"@emotion/styled\";\r\nimport Transition from \"react-transition-group/Transition\";\r\nimport Fade from \"react-reveal/Fade\";\r\nimport Button from \"./Button\";\r\nimport View0 from \"./View0\";\r\nimport View1 from \"./View1\";\r\nimport View2 from \"./View2\";\r\n\r\nconst Views = [View0, View1, View2];\r\n\r\nconst transitionStyles = {\r\n  entering: { opacity: 0 },\r\n  entered: { opacity: 1 }\r\n};\r\n\r\nconst duration = 1000;\r\n\r\nconst FullWrap = styled.div`\r\n  opacity: 0;\r\n  transition: opacity ${duration}ms ease-in-out;\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  width: 100vw;\r\n  height: 100vh;\r\n  z-index: 1;\r\n  background: rgba(255, 255, 255, 0.9);\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: flex-end;\r\n  flex-direction: column;\r\n`;\r\n\r\nconst InnerWrap = styled.div`\r\n  height: 100%;\r\n`;\r\n\r\nconst WithBtnWrap = styled.div`\r\n  height: 100vh;\r\n  max-height: 25rem;\r\n  max-width: 40rem;\r\n  width: 80%;\r\n  margin: 0 auto;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  flex-direction: column;\r\n  position: relative;\r\n`;\r\n\r\nconst ContentWrap = styled.div`\r\n  display: ${({ display }) => display};\r\n  width: 100%;\r\n  h1 {\r\n    text-align: center;\r\n    margin-bottom: 2.5rem;\r\n  }\r\n  h2 {\r\n    margin-bottom: 30px;\r\n  }\r\n  p {\r\n    text-align: justify;\r\n    font-size: 1.2rem;\r\n  }\r\n  p:last-of-type {\r\n    margin-bottom: 2rem;\r\n  }\r\n`;\r\n\r\nlet Btn = styled(Button)`\r\n  align-self: flex-end;\r\n`;\r\n\r\nclass Modal extends React.Component {\r\n  state = {\r\n    show: false\r\n  };\r\n\r\n  render() {\r\n    const { in: inProp, currentView, continueHandler } = this.props;\r\n    const nextView = (currentView, num) => {\r\n      const CurrentView = Views[num];\r\n      return (\r\n        <Fade delay={300} left opposite when={currentView === num} collapse>\r\n          <ContentWrap display={currentView === num ? \"block\" : \"none\"}>\r\n            <CurrentView />\r\n          </ContentWrap>\r\n        </Fade>\r\n      );\r\n    };\r\n\r\n    return (\r\n      <Transition in={inProp} timeout={duration} unmountOnExit>\r\n        {state => (\r\n          <FullWrap\r\n            style={{\r\n              ...transitionStyles[state]\r\n            }}\r\n          >\r\n            <WithBtnWrap>\r\n              <InnerWrap>\r\n                <Fade\r\n                  duration={500}\r\n                  left\r\n                  opposite\r\n                  when={currentView === 0}\r\n                  collapse\r\n                >\r\n                  <ContentWrap display={currentView === 0 ? \"block\" : \"none\"}>\r\n                    <View0 />\r\n                  </ContentWrap>\r\n                </Fade>\r\n                {nextView(currentView, 1)}\r\n              </InnerWrap>\r\n              <Btn onClick={continueHandler}>Continue</Btn>\r\n            </WithBtnWrap>\r\n          </FullWrap>\r\n        )}\r\n      </Transition>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Modal;\r\n","export default {\r\n  2: \"<p>In U.S. national party primaries, public financing is available to candidates who meet certain guidelines. During a specified time period, the candidates collect donations from their supporters. After the time period ends, each candidate is eligible to receive a portion of public funds based on each candidate's total receipts.</p><p>The problem with this system is that it doesn't account for <em>how many</em> donors contributed -- only the total dollar amount. For example, if a million individual donors each contribute a dollar to one candidate, and a single donor contributes a million dollars to a different candidate, both candidates would receive the same amount of public funds. <p>In the U.S.A, this is alleviated by disallowing any donor from giving more than $2,700 per candidate.</p>\",\r\n  3: \"<p>In the 2016 primary, Hillary Clinton received the largest total donations while Bernie Sanders received the most <em>individual</em> donations.</p><p>The yellow dots in the chart represent the portion of public funds made available to each candidate. As shown, the public funds don't change the competitive balance -- the candidate with the most donations always receives the most public funding.</p><p>Some argue this is a fair system. However, that requires accepting the notion that the more wealth you have, the more influence you should have in politics.</p>\",\r\n  4: \"\"\r\n};\r\n","import React from \"react\";\r\nimport styled from \"@emotion/styled\";\r\nimport Button from \"./Button\";\r\nimport sideText from \"./sideText\";\r\n\r\nconst Container = styled.div`\r\n  /* display: ${({ display }) => display}; */\r\n  position: absolute;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: flex-end;\r\n  top: 0;\r\n  right: 0;\r\n  width: 35vw;\r\n  padding: 10vh 3vw 2rem;\r\n  text-align: justify;\r\n  opacity: ${({ opacity }) => opacity};\r\n  transition: opacity 500ms ease 1500ms;\r\n`;\r\n\r\nexport default function SideBox({\r\n  continueHandler,\r\n  sideBoxShowing,\r\n  currentView\r\n}) {\r\n  console.log(sideBoxShowing);\r\n  return (\r\n    <Container opacity={sideBoxShowing ? 1 : 0}>\r\n      <div dangerouslySetInnerHTML={{ __html: sideText[currentView] }} />\r\n      <Button onClick={continueHandler}>Continue</Button>\r\n    </Container>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport styled from \"@emotion/styled\";\r\n\r\nconst Wrap = styled.div`\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  width: 100vw;\r\n  height: 100vh;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n`;\r\n\r\nexport default function LandscapeMessage() {\r\n  return (\r\n    <Wrap>\r\n      <p>Please rotate your device to landscape</p>\r\n    </Wrap>\r\n  );\r\n}\r\n","export function debounce(func, wait, immediate) {\r\n  var timeout;\r\n  return function() {\r\n    var context = this,\r\n      args = arguments;\r\n    var later = function() {\r\n      timeout = null;\r\n      if (!immediate) func.apply(context, args);\r\n    };\r\n    var callNow = immediate && !timeout;\r\n    clearTimeout(timeout);\r\n    timeout = setTimeout(later, wait);\r\n    if (callNow) func.apply(context, args);\r\n  };\r\n}\r\n\r\nexport function checkLandscape() {\r\n  return window.innerHeight < window.innerWidth;\r\n}\r\n","import { totals } from \"./data/2016_primary_data\";\r\nconst windowHeight = document.documentElement.clientHeight;\r\nconst windowWidth = document.documentElement.clientWidth;\r\n\r\nconst max = 10000000;\r\n\r\nconst tierReference = {\r\n  zeroTo50Amount: {\r\n    ratio: 50 / 2700\r\n  },\r\n  fiftyTo200Amount: {\r\n    ratio: 200 / 2700\r\n  },\r\n  twoHundredTo500Amount: {\r\n    ratio: 500 / 2700\r\n  },\r\n  fiveHundredTo1000Amount: {\r\n    ratio: 1000 / 2700\r\n  },\r\n  oneThouTo2000Amount: {\r\n    ratio: 2000 / 2700\r\n  },\r\n  twoThouToLimitAmount: {\r\n    ratio: 1\r\n  }\r\n};\r\n\r\nexport const buildDataArray = () => {\r\n  let count = 0;\r\n  const dataArray = [];\r\n\r\n  totals.forEach(candidate => {\r\n    for (let prop in candidate) {\r\n      if (\r\n        /amount/i.test(prop) &&\r\n        !/grand/i.test(prop) &&\r\n        candidate[prop] &&\r\n        !isNaN(candidate[prop])\r\n      ) {\r\n        const amount = max * tierReference[prop].ratio;\r\n        let num = Math.ceil(candidate[prop] / amount);\r\n        // console.log(candidate.name, prop, num, amount);\r\n\r\n        for (let i = 0; i < num; i++) {\r\n          let a = Math.random() * 2 * Math.PI;\r\n          let r = Math.sqrt(~~(Math.random() * windowHeight ** 2));\r\n\r\n          dataArray.push({\r\n            id: count,\r\n            name: candidate.name,\r\n            tier: prop,\r\n            text: tierReference[prop].text,\r\n            size: 2700 * tierReference[prop].ratio,\r\n            amount: Math.round(amount / 100000) * 100000,\r\n            initX: (windowWidth / 2) * Math.cos(a),\r\n            initY: windowHeight / 2 + r * Math.sin(a)\r\n          });\r\n          count++;\r\n        }\r\n      }\r\n    }\r\n  });\r\n\r\n  const cache = {};\r\n  dataArray.forEach(o => {\r\n    if (o.name === \"Hillary Clinton\" && !cache[o.tier]) {\r\n      cache[o.tier] = 0;\r\n    }\r\n    cache[o.tier]++;\r\n  });\r\n  console.log(cache);\r\n\r\n  // console.log(count);\r\n  return dataArray;\r\n};\r\n","import React from \"react\";\r\nimport styled from \"@emotion/styled\";\r\n\r\nconst Toolbar = styled.div`\r\n  height: ${({ height }) => height};\r\n  position: absolute;\r\n  width: 100%;\r\n  bottom: 0;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: flex-start;\r\n`;\r\n\r\nexport default function Buttons(props) {\r\n  return props.currentView > -1 ? (\r\n    <Toolbar id=\"donations-buttons\" height={props.footerHeight}>\r\n      <button\r\n        id=\"donation_all\"\r\n        onClick={props.donationButtonHandler}\r\n        className=\"button active\"\r\n      >\r\n        All Donations\r\n      </button>\r\n      <button\r\n        id=\"donation_tiers\"\r\n        onClick={props.donationButtonHandler}\r\n        className=\"button\"\r\n      >\r\n        Donations By Tier\r\n      </button>\r\n    </Toolbar>\r\n  ) : null;\r\n}\r\n","import React, { Component } from \"react\";\nimport Chart from \"./components/Chart\";\nimport Modal from \"./components/Modal\";\nimport SideBox from \"./components/SideBox\";\nimport LandscapeMessage from \"./components/LandscapeMessage\";\nimport styled from \"@emotion/styled\";\nimport chart from \"./d3/chart\";\nimport { debounce, checkLandscape } from \"./helpers/helpers\";\nimport { wait } from \"./d3/config\";\nimport chartData from \"./data/2016_primary_json\";\nimport { buildDataArray } from \"./dataBuilder\";\nimport \"./styles/bubble_chart.css\";\nimport Buttons from \"./components/Buttons\";\n\nconst MainTitle = styled.h1`\n  position: absolute;\n  top: 0;\n  padding: 0 1rem 0;\n  opacity: ${({ opacity }) => opacity};\n  transition: 500ms ease-in-out;\n  text-align: right;\n  width: 100%;\n`;\n\nclass App extends Component {\n  state = {\n    activeDonationBtn: \"donation_all\",\n    currentView: 0,\n    modalShowing: false,\n    animDelay: 0,\n    landscape: true,\n    chartLoaded: false,\n    sideBoxShowing: false\n  };\n\n  async componentDidMount() {\n    this.checkOrientation();\n\n    window.addEventListener(\"resize\", debounce(this.checkOrientation, 100));\n\n    await wait(1200);\n\n    this.setState({ modalShowing: true });\n\n    // const dataAray = buildDataArray();\n    // console.log(dataAray);\n    // console.log(JSON.stringify(dataAray));\n  }\n\n  checkOrientation = () => {\n    const landscape = checkLandscape();\n    this.setState({ landscape });\n  };\n\n  async componentDidUpdate() {\n    const { currentView, activeDonationBtn, animDelay } = this.state;\n\n    if (!animDelay) {\n      chart.render(currentView, activeDonationBtn);\n    } else {\n      await wait(500);\n      chart.render(currentView, activeDonationBtn);\n    }\n  }\n\n  donationButtonHandler = e => {\n    this.setState({ activeDonationBtn: e.target.id });\n  };\n\n  continueHandler = e => {\n    const { currentView } = this.state;\n    const newView = currentView + 1;\n    this.setState({\n      currentView: newView\n    });\n\n    if (newView === 2) {\n      this.setState({\n        animDelay: 1500,\n        modalShowing: false,\n        activeDonationBtn: \"donation_tiers\",\n        sideBoxShowing: true\n      });\n    }\n    if (newView > 2) {\n      window.scrollTo(0, 0);\n    }\n  };\n\n  render() {\n    const { currentView, landscape, modalShowing, sideBoxShowing } = this.state;\n    const windowHeight = window.innerHeight;\n    const footerHeight = windowHeight > 375 ? \"6vh\" : \"8vh\";\n    console.log(\"currentView: \", currentView, \"modalShowing: \", modalShowing);\n    return !landscape ? (\n      <LandscapeMessage />\n    ) : (\n      <React.Fragment>\n        {windowHeight > 375 && (\n          <MainTitle\n            className=\"header-main\"\n            opacity={currentView < 2 ? 0 : 0.3}\n          >\n            liberal radicalism\n          </MainTitle>\n        )}\n        {/* <div>{window.innerHeight + \" \" + window.innerWidth}</div> */}\n        <Chart chartData={chartData} currentView={currentView} />\n        <Buttons\n          footerHeight={footerHeight}\n          donationButtonHandler={this.donationButtonHandler}\n          continueHandler={this.continueHandler}\n          currentView={currentView}\n        />\n        <Modal\n          in={modalShowing}\n          currentView={currentView}\n          continueHandler={this.continueHandler}\n        />\n        <SideBox\n          continueHandler={this.continueHandler}\n          sideBoxShowing={sideBoxShowing}\n          currentView={currentView}\n        />\n        <button\n          onClick={this.continueHandler}\n          style={{ position: \"absolute\", left: 0, bottom: 0 }}\n        >\n          continue\n        </button>\n      </React.Fragment>\n    );\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { hot } from \"react-hot-loader\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport * as serviceWorker from \"./serviceWorker\";\n\nconst root = document.getElementById(\"root\");\n\n// const HotApp = hot(module)(App);\n\nReactDOM.render(<App />, root);\n\n// if (module.hot) {\n//   module.hot.accept(\"./App\", () => {\n//     const NextApp = require(\"./App\").default;\n//     ReactDOM.render(<NextApp />, root);\n//   });\n// }\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}