{"version":3,"sources":["data/fakePrimaryData.js","d3/config.js","d3/simulation.js","d3/nodeHandlers.js","d3/render.js","d3/chart.js","d3/createNodes.js","components/Chart.js","components/Button.js","components/View0.js","components/View1.js","components/Modal.js","components/View5.js","components/sideText.js","components/SideBox.js","components/LandscapeMessage.js","helpers/helpers.js","App.js","serviceWorker.js","index.js"],"names":["fakePrimaryData","Alice","_50Count","value","count","_200Count","_500Count","_1kCount","_2kCount","_5kCount","_50kCount","_1mCount","Bill","donationColors","screenHeight","window","innerHeight","screenWidth","innerWidth","chartWidth","Math","min","chartHeight","legendWidth","max","topPad","bottomPad","candidates","donationSum","normalMatchSum","lrMatch","xScale","scalePoint","padding","domain","Object","keys","range","tierLevels","Amounts","text","cluster","Totals","tierScale","scaleLinear","forEach","k","i","y","forceStrength","getCharge","exponent","arguments","length","undefined","force","d","pow","radius","wait","delay","Promise","res","setTimeout","frame","chart","bubbles","attr","x","groupAllBubbles","alpha","decay","allForce","centerY","console","log","svg","selectAll","remove","velocityDecay","forceY","strength","restart","splitByDonation","_splitByDonation","apply","this","_callee","tierForce","key","regenerator_default","a","wrap","_context","prev","next","tier","forceX","name","showTierLabels","stop","tierLabels","data","enter","append","transition","ease","easePolyOut","duration","each","select","style","render","init","domNode","rawData","maxAmount","amount","fillColor","scaleOrdinal","sim","forceSimulation","forceManyBody","on","initSimulation","simulations","objectSpread","initTierSimulations","candidateForce","initCandidateSimulations","nodes","centerX","radiusScale","scaleSqrt","myNodes","map","random","PI","r","sqrt","id","color","cos","sin","candidateNodes","_loop","filter","node","defineProperty","enumerable","pubFundNodes","array","push","toConsumableArray","sort","b","createNodes","allBubblesGroup","_ref","currentView","activeDonationBtn","animDelay","sortedArray","classed","names","showCandidates","nodeGroup","splitByCandidate","concat","toLocaleString","showTotals","view2","stopSplitByCandidate","_loop2","view3","pubNodes","tiers","matchedAmt","numOfNodes","round","totals","createPubFundNodes","allNodes","_loop3","view4","bubblesE","rgb","darker","merge","updateAndMerge","ChartContainer","styled","div","_templateObject","Chart","props","chartData","react_default","createElement","Component","button","Button_templateObject","small","_ref2","View0","Wrap","View1_templateObject","Quote","blockquote","_templateObject2","Cite","cite","_templateObject3","Views","0","1","5","transitionStyles","entering","opacity","entered","FullWrap","Modal_templateObject","InnerWrap","Modal_templateObject2","WithBtnWrap","Modal_templateObject3","ContentWrap","_templateObject4","display","Btn","Button","_templateObject5","Modal","state","show","_this$props","inProp","in","continueHandler","nextView","num","CurrentView","Fade_default","left","opposite","when","collapse","Transition_default","timeout","unmountOnExit","onClick","position","bottom","right","React","sideText","2","Fragment","3","4","href","target","src","alt","6","Container","SideBox_templateObject","TextWrap","SideBox_templateObject2","BtnWrapper","SideBox_templateObject3","MainTitle","SideBox_templateObject4","SideBox","_ref3","sideBoxShowing","publicFundHandler","donationButtonHandler","backHandler","fundsActive","fundItOn","continueOn","className","LandscapeMessage_templateObject","LandscapeMessage","LandscapeMessage_Wrap","debounce","func","immediate","context","args","callNow","clearTimeout","initState","modalShowing","landscape","chartLoaded","App","checkOrientation","_this","setState","e","newView","scrollTo","addEventListener","prevProps","prevState","location","reload","_this$state2","Chart_Chart","components_Modal","Boolean","hostname","match","root","document","getElementById","ReactDOM","src_App","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.cc2cc668.chunk.js","sourcesContent":["export default {\r\n  Alice: {\r\n    _50Count: { value: 50, count: 3353 },\r\n    _200Count: { value: 200, count: 638 },\r\n    _500Count: { value: 500, count: 305 },\r\n    _1kCount: { value: 1000, count: 110 },\r\n    _2kCount: { value: 2000, count: 38 },\r\n    _5kCount: { value: 5000, count: 3 },\r\n    _50kCount: { value: 50000, count: 1 },\r\n    _1mCount: { value: 1000000, count: 0 }\r\n  },\r\n\r\n  Bill: {\r\n    _50Count: { value: 50, count: 168 },\r\n    _200Count: { value: 200, count: 110 },\r\n    _500Count: { value: 500, count: 80 },\r\n    _1kCount: { value: 1000, count: 75 },\r\n    _2kCount: { value: 2000, count: 53 },\r\n    _5kCount: { value: 5000, count: 38 },\r\n    _50kCount: { value: 50000, count: 5 },\r\n    _1mCount: { value: 1000000, count: 1 }\r\n  }\r\n};\r\n","import { scaleLinear, scalePoint } from \"d3-scale\";\r\nimport { max } from \"d3-array\";\r\n\r\nexport const donationColors = [\r\n  \"#99D492\",\r\n  \"#74C67A\",\r\n  \"#56B870\",\r\n  \"#39A96B\",\r\n  \"#1D9A6C\",\r\n  \"#188977\",\r\n  \"#137177\",\r\n  \"#0E4D64\",\r\n  \"#0A2F51\"\r\n];\r\n\r\nexport const screenHeight = window.innerHeight;\r\nexport const screenWidth = window.innerWidth;\r\nexport const chartWidth = Math.min(screenWidth * 0.62, 1400);\r\nexport const chartHeight = screenHeight * 0.92;\r\nexport const legendWidth = Math.max(chartWidth * 0.25, 95);\r\nexport const topPad = chartHeight * 0.04;\r\nexport const bottomPad = chartHeight * 0.02;\r\n\r\n// Locations to move bubbles towards, depending\r\n// on which view mode is selected.\r\nexport const center = { x: screenWidth / 2, y: screenHeight / 2 };\r\nexport const chartCenter = {\r\n  x: (chartWidth - legendWidth) / 2 + legendWidth,\r\n  y: chartHeight / 2\r\n};\r\n\r\nexport const combinedDollarSum = 447368608;\r\n\r\nexport const candidates = {\r\n  Alice: {\r\n    count: 4448,\r\n    donationSum: 698750,\r\n    normalMatchSum: 1898780,\r\n    lrMatch: 2075929.41\r\n  },\r\n  Bill: {\r\n    count: 530,\r\n    donationSum: 1691400,\r\n    normalMatchSum: 2015955,\r\n    lrMatch: 1814220.59\r\n  }\r\n};\r\n\r\nexport const xScale = scalePoint()\r\n  .padding(0.3)\r\n  .domain(Object.keys(candidates))\r\n  .range([0, chartWidth]);\r\n\r\nexport const tierLevels = {\r\n  Amounts: {\r\n    text: \"Donation Ranges\"\r\n  },\r\n  _1mCount: {\r\n    text: \"$1m\",\r\n    cluster: {}\r\n  },\r\n  _50kCount: {\r\n    text: \"$50k - $1m\",\r\n    cluster: {}\r\n  },\r\n  _5kCount: {\r\n    text: \"$2k - $5k\",\r\n    cluster: {}\r\n  },\r\n  _2kCount: {\r\n    text: \"$1k - $2k\",\r\n    cluster: {}\r\n  },\r\n  _1kCount: {\r\n    text: \"$500 - $1k\",\r\n    cluster: {}\r\n  },\r\n  _500Count: {\r\n    text: \"$200 - $500\",\r\n    cluster: {}\r\n  },\r\n  _200Count: {\r\n    text: \"$50 - $200\",\r\n    cluster: {}\r\n  },\r\n  _50Count: {\r\n    text: \"$0 - $50\",\r\n    cluster: {}\r\n  },\r\n  Totals: {\r\n    text: \"TOTALS:\"\r\n  }\r\n};\r\n\r\nexport const tierScale = scaleLinear()\r\n  .domain([0, 10])\r\n  .range([topPad, chartHeight - bottomPad]);\r\n\r\nexport const tierLevelKeys = Object.keys(tierLevels);\r\ntierLevelKeys.forEach((k, i) => {\r\n  tierLevels[k].y = tierScale(i);\r\n});\r\n\r\nexport const forceStrength = 0.07;\r\n\r\nexport function getCharge(exponent = 1.8, force = forceStrength) {\r\n  return d => -Math.pow(d.radius, exponent) * force;\r\n}\r\n\r\nexport function maxAmount(data) {\r\n  return max(data, function(d) {\r\n    return +d.amount;\r\n  });\r\n}\r\n\r\nexport function scaleMatrix(s) {\r\n  let centerX = chartWidth / 2;\r\n  let centerY = chartHeight / 2;\r\n\r\n  return `matrix(${s}, 0, 0, ${s}, ${centerX - s * centerX}, ${centerY -\r\n    s * centerY})`;\r\n}\r\n\r\nexport function wait(delay) {\r\n  return new Promise(res => {\r\n    setTimeout(() => {\r\n      res();\r\n    }, delay);\r\n  });\r\n}\r\n","import { forceSimulation, forceX, forceY, forceManyBody } from \"d3-force\";\r\nimport chart from \"./chart\";\r\nimport {\r\n  forceStrength,\r\n  getCharge,\r\n  chartWidth,\r\n  chartHeight,\r\n  tierLevels,\r\n  candidates\r\n} from \"./config\";\r\n\r\n// generates force simulator based on x & y position\r\n\r\nexport function initSimulation() {\r\n  const sim = forceSimulation()\r\n    .force(\r\n      \"x\",\r\n      forceX()\r\n        .strength(forceStrength)\r\n        .x(chartWidth / 2)\r\n    )\r\n    .force(\"charge\", forceManyBody().strength(getCharge()))\r\n    .on(\"tick\", frame);\r\n\r\n  // @v4 Force starts up automatically,\r\n  //  which we don't want as there aren't any nodes yet.\r\n  sim.stop();\r\n  return sim;\r\n}\r\n\r\nexport function initTierSimulations() {\r\n  const simulations = { ...tierLevels };\r\n\r\n  // these are just the x values & text for the legend\r\n  delete simulations.Amounts;\r\n  delete simulations.Totals;\r\n\r\n  for (let key in simulations) {\r\n    const sim = forceSimulation()\r\n      .force(\r\n        \"x\",\r\n        forceX()\r\n          .strength(forceStrength)\r\n          .x(chartWidth / 2)\r\n      )\r\n      .force(\"charge\", forceManyBody().strength(getCharge()))\r\n      .on(\"tick\", frame);\r\n\r\n    // @v4 Force starts up automatically,\r\n    //  which we don't want as there aren't any nodes yet.\r\n    sim.stop();\r\n    simulations[key] = sim;\r\n  }\r\n  return simulations;\r\n}\r\n\r\nexport function initCandidateSimulations() {\r\n  const simulations = { ...candidates };\r\n\r\n  // uneeded prop\r\n  delete simulations.x;\r\n\r\n  for (let key in simulations) {\r\n    const sim = forceSimulation()\r\n      .force(\r\n        \"y\",\r\n        forceY()\r\n          .strength(forceStrength)\r\n          .y(chartHeight / 2)\r\n      )\r\n      .force(\"charge\", forceManyBody().strength(getCharge()))\r\n      .on(\"tick\", frame);\r\n\r\n    // @v4 Force starts up automatically,\r\n    //  which we don't want as there aren't any nodes yet.\r\n    sim.stop();\r\n    simulations[key] = sim;\r\n  }\r\n\r\n  return simulations;\r\n}\r\n\r\nfunction frame() {\r\n  chart.bubbles\r\n    .attr(\"cx\", function(d) {\r\n      return d.x;\r\n    })\r\n    .attr(\"cy\", function(d) {\r\n      return d.y;\r\n    });\r\n}\r\n","import { forceX, forceY } from \"d3-force\";\r\nimport { easePolyOut } from \"d3-ease\";\r\nimport chart from \"./chart\";\r\nimport { select } from \"d3-selection\";\r\nimport {\r\n  forceStrength,\r\n  tierLevels,\r\n  candidates,\r\n  xScale,\r\n  chartHeight,\r\n  legendWidth,\r\n  wait,\r\n  chartWidth\r\n} from \"./config\";\r\n\r\nexport function groupAllBubbles(alpha, decay) {\r\n  const { allForce } = chart;\r\n  const centerY = chartHeight / 2;\r\n  console.log(\"group called\");\r\n\r\n  hideTierLabels();\r\n\r\n  allForce.velocityDecay(decay).force(\r\n    \"y\",\r\n    forceY()\r\n      .strength(forceStrength)\r\n      .y(centerY)\r\n  );\r\n\r\n  allForce.alpha(alpha).restart();\r\n}\r\n\r\nexport async function splitByDonation() {\r\n  const { tierForce } = chart;\r\n\r\n  for (let key in tierForce) {\r\n    tierForce[key]\r\n      .velocityDecay(0.25)\r\n      .force(\r\n        \"y\",\r\n        forceY()\r\n          .strength(forceStrength)\r\n          .y(d => {\r\n            return tierLevels[d.tier].y;\r\n          })\r\n      )\r\n      .force(\r\n        \"x\",\r\n        forceX()\r\n          .strength(forceStrength)\r\n          .x(d => {\r\n            return xScale(d.name);\r\n          })\r\n      );\r\n\r\n    tierForce[key].alpha(1).restart();\r\n\r\n    showTierLabels();\r\n  }\r\n}\r\n\r\nexport function splitByCandidate() {\r\n  const { candidateForce } = chart;\r\n\r\n  for (let key in candidateForce) {\r\n    candidateForce[key]\r\n      .velocityDecay(0.25)\r\n      .force(\r\n        \"x\",\r\n        forceX()\r\n          .strength(forceStrength)\r\n          .x(d => {\r\n            return xScale(d.name);\r\n          })\r\n      )\r\n      .force(\r\n        \"y\",\r\n        forceY()\r\n          .strength(forceStrength)\r\n          .y(chartHeight * 0.5)\r\n      );\r\n    candidateForce[key].alpha(1).restart();\r\n  }\r\n}\r\n\r\nexport function stopSplitByCandidate() {\r\n  const { candidateForce } = chart;\r\n  for (let key in candidateForce) {\r\n    candidateForce[key].stop();\r\n  }\r\n}\r\n\r\nexport function showTotals(key) {\r\n  const names = Object.keys(candidates);\r\n\r\n  const totalText = chart.svg.selectAll(\".money-totals\").data(names);\r\n  totalText\r\n    .enter()\r\n    .append(\"text\")\r\n    .attr(\"class\", \"money-totals\")\r\n    .attr(\"y\", tierLevels.Totals.y)\r\n    .attr(\"x\", name => xScale(name))\r\n    .attr(\"text-anchor\", \"middle\")\r\n    .text(name => {\r\n      return `$${candidates[name][key].toLocaleString()}`;\r\n    });\r\n}\r\n\r\nexport function hideTierLabels() {\r\n  chart.svg.selectAll(\".tier-label\").remove();\r\n}\r\n\r\nexport function showTierLabels() {\r\n  let tierLabels = Object.keys(tierLevels);\r\n\r\n  const tierTitle = chart.svg.selectAll(\".tier-label\").data(tierLabels);\r\n\r\n  tierTitle\r\n    .enter()\r\n    .append(\"text\")\r\n    .attr(\"class\", \"tier-label\")\r\n    .attr(\"y\", key => tierLevels[key].y)\r\n    .attr(\"x\", 0)\r\n    .transition()\r\n    .ease(easePolyOut)\r\n    .duration(700)\r\n    .attr(\"x\", legendWidth)\r\n    .attr(\"text-anchor\", \"end\")\r\n    .text(d => tierLevels[d].text)\r\n    .each(function(d) {\r\n      if (d === \"Amounts\") {\r\n        select(this)\r\n          .style(\"text-decoration\", \"underline\")\r\n          .style(\"font-weight\", \"bold\");\r\n      }\r\n      if (d === \"Totals\") {\r\n        select(this).style(\"font-weight\", \"bold\");\r\n      }\r\n    });\r\n}\r\n\r\nexport function moveTitlesAndTotals() {\r\n  const candidateTitles = chart.svg.selectAll(\".candidate, .money-totals\");\r\n\r\n  candidateTitles\r\n    .transition()\r\n    .duration(700)\r\n    .ease(easePolyOut)\r\n    .attr(\"x\", function(d) {\r\n      return xScale(d);\r\n    });\r\n}\r\n\r\nexport function showCandidates() {\r\n  let names = Object.keys(candidates);\r\n  const candidateTitles = chart.svg.selectAll(\".candidate\").data(names);\r\n\r\n  candidateTitles\r\n    .enter()\r\n    .append(\"text\")\r\n    .attr(\"class\", \"candidate\")\r\n    .attr(\"x\", function(d) {\r\n      return xScale(d);\r\n    })\r\n    .attr(\"y\", chartHeight * 0.04)\r\n    .attr(\"text-anchor\", \"middle\")\r\n    .text(function(d) {\r\n      return d;\r\n    });\r\n}\r\n\r\nexport function toggleDonationGroups(activeDonationBtn, delay) {\r\n  if (activeDonationBtn === \"donation_tiers\") {\r\n    splitByDonation(delay);\r\n  } else {\r\n    groupAllBubbles(1, 0.12);\r\n  }\r\n}\r\n","import { rgb } from \"d3-color\";\r\nimport { forceManyBody } from \"d3-force\";\r\nimport \"d3-transition\";\r\nimport {\r\n  screenWidth,\r\n  screenHeight,\r\n  chartWidth,\r\n  chartHeight,\r\n  xScale,\r\n  legendWidth,\r\n  getCharge,\r\n  forceStrength\r\n} from \"./config\";\r\nimport {\r\n  groupAllBubbles,\r\n  showCandidates,\r\n  splitByCandidate,\r\n  splitByDonation,\r\n  showTotals,\r\n  moveTitlesAndTotals,\r\n  stopSplitByCandidate\r\n} from \"./nodeHandlers\";\r\nimport chart from \"./chart\";\r\nimport { createPubFundNodes } from \"./createNodes\";\r\n\r\nfunction render({ currentView, activeDonationBtn, animDelay }) {\r\n  switch (currentView) {\r\n    case 0:\r\n      view0();\r\n      break;\r\n    case 1:\r\n      view1();\r\n      break;\r\n    case 2:\r\n      view2();\r\n      break;\r\n    case 3:\r\n      view3();\r\n      break;\r\n    case 4:\r\n      view4();\r\n    default:\r\n  }\r\n\r\n  updateAndMerge();\r\n}\r\n\r\nfunction view0() {\r\n  chart.allForce.nodes(chart.nodes.sortedArray());\r\n  groupAllBubbles(1, 0.4);\r\n}\r\n\r\nfunction view1() {}\r\n\r\nfunction view2() {\r\n  const { svg, candidateForce, nodes } = chart;\r\n\r\n  svg.classed(\"downscale\", true);\r\n  svg.classed(\"left-side\", true);\r\n\r\n  xScale.padding(0.4).range([0, chartWidth]);\r\n\r\n  showCandidates();\r\n\r\n  for (let key in candidateForce) {\r\n    const nodeGroup = nodes.sortedArray().filter(node => {\r\n      return key === node.name;\r\n    });\r\n    candidateForce[key].nodes(nodeGroup);\r\n  }\r\n\r\n  splitByCandidate();\r\n  showTotals(\"donationSum\");\r\n}\r\n\r\nfunction view3() {\r\n  const { tierForce, nodes } = chart;\r\n  stopSplitByCandidate();\r\n\r\n  for (let key in tierForce) {\r\n    const nodeGroup = nodes.sortedArray().filter(node => {\r\n      return key === node.tier;\r\n    });\r\n    tierForce[key].nodes(nodeGroup);\r\n  }\r\n  xScale.range([legendWidth * 1.5, chartWidth]);\r\n  splitByDonation();\r\n  moveTitlesAndTotals();\r\n}\r\n\r\nfunction view4() {\r\n  //create public funding nodes\r\n  const pubFundNodes = createPubFundNodes();\r\n\r\n  //add them to existing nodes\r\n  const allNodes = chart.nodes.sortedArray(pubFundNodes);\r\n  // console.log(allNodes);\r\n\r\n  // restart force simulatoin for each group\r\n  for (let key in chart.tierForce) {\r\n    const nodeGroup = allNodes.filter(node => {\r\n      return key === node.tier;\r\n    });\r\n\r\n    chart.tierForce[key].velocityDecay(0.28);\r\n    chart.tierForce[key].nodes(nodeGroup);\r\n    chart.tierForce[key].alpha(1).restart();\r\n  }\r\n}\r\n\r\nexport function updateAndMerge() {\r\n  chart.bubbles = chart.allBubblesGroup\r\n    .selectAll(\"circle\")\r\n    .data(chart.nodes.sortedArray(), function(d) {\r\n      return d.id;\r\n    });\r\n\r\n  console.log(chart.nodes.sortedArray());\r\n  const bubblesE = chart.bubbles\r\n    .enter()\r\n    .append(\"circle\")\r\n    .attr(\"r\", 0)\r\n    .attr(\"fill\", d => d.color)\r\n    .attr(\"stroke\", function(d) {\r\n      return rgb(d.color).darker([3]);\r\n    })\r\n    .attr(\"stroke-width\", 0.25);\r\n\r\n  chart.bubbles = chart.bubbles.merge(bubblesE);\r\n\r\n  chart.bubbles\r\n    .transition()\r\n    .duration(1200)\r\n    .attr(\"r\", function(d) {\r\n      return d.radius;\r\n    });\r\n}\r\n\r\nexport default render;\r\n","/*\r\n * Code adapted from:\r\n * http://vallandingham.me/gates_bubbles/\r\n *\r\n */\r\nimport { select } from \"d3-selection\";\r\nimport { scaleOrdinal } from \"d3-scale\";\r\nimport { createNodes, createPubFundNodes } from \"./createNodes\";\r\nimport {\r\n  initSimulation,\r\n  initTierSimulations,\r\n  initCandidateSimulations\r\n} from \"./simulation\";\r\nimport { maxAmount, donationColors, chartWidth, chartHeight } from \"./config\";\r\nimport render from \"./render\";\r\n\r\nconst chart = {\r\n  init: function(domNode, rawData) {\r\n    this.maxAmount = maxAmount(rawData);\r\n\r\n    this.fillColor = scaleOrdinal()\r\n      .domain([\r\n        \"_1mCount\",\r\n        \"_50kCount\",\r\n        \"_5kCount\",\r\n        \"_2kCount\",\r\n        \"_1kCount\",\r\n        \"_500Count\",\r\n        \"_200Count\",\r\n        \"_50Count\"\r\n      ])\r\n      .range(donationColors);\r\n\r\n    this.allForce = initSimulation();\r\n    this.tierForce = initTierSimulations();\r\n    this.candidateForce = initCandidateSimulations();\r\n\r\n    this.svg = select(domNode)\r\n      .append(\"svg\")\r\n      .attr(\"width\", chartWidth)\r\n      .attr(\"height\", chartHeight);\r\n\r\n    this.nodes = createNodes(rawData);\r\n\r\n    this.allBubblesGroup = this.svg.append(\"g\");\r\n    // .attr(\"transform\", scaleMatrix(2));\r\n\r\n    this.bubbles = null;\r\n  },\r\n  render\r\n};\r\n\r\nexport default chart;\r\n","import { scaleSqrt } from \"d3-scale\";\r\nimport totals from \"../data/fakePrimaryData\";\r\nimport chart from \"./chart\";\r\nimport {\r\n  tierLevels,\r\n  chartWidth,\r\n  chartHeight,\r\n  candidates,\r\n  xScale,\r\n  sortByRadius\r\n} from \"./config\";\r\n\r\nexport function createNodes(rawData) {\r\n  const centerX = chartWidth / 2;\r\n  const centerY = chartHeight / 2;\r\n\r\n  const radiusScale = scaleSqrt()\r\n    .domain([0, chart.maxAmount])\r\n    .range([0, chartHeight * 0.045]);\r\n\r\n  // attaches x & y value for each cluster\r\n  for (let key in tierLevels) {\r\n    if (tierLevels[key].cluster) {\r\n      for (let name in candidates) {\r\n        tierLevels[key].cluster[name] = [xScale(name), tierLevels[key].y];\r\n      }\r\n    }\r\n  }\r\n\r\n  const myNodes = rawData.map(function(d, i) {\r\n    let a = Math.random() * 2 * Math.PI;\r\n    let r = Math.sqrt(~~(Math.random() * chartHeight ** 2));\r\n\r\n    return {\r\n      id: i + \"-donation\",\r\n      radius: radiusScale(+d.amount),\r\n      color: chart.fillColor(d.tier),\r\n      name: d.name,\r\n      text: tierLevels[d.tier].text,\r\n      tier: d.tier,\r\n      amount: d.amount,\r\n      count: d.count,\r\n      x: centerX + r * Math.cos(a),\r\n      y: centerY + r * Math.sin(a)\r\n    };\r\n  });\r\n\r\n  const candidateNodes = {};\r\n  for (let name in candidates) {\r\n    const nodes = myNodes.filter(node => {\r\n      return node.name === name;\r\n    });\r\n    candidateNodes[name] = nodes;\r\n  }\r\n\r\n  Object.defineProperty(candidateNodes, \"sortedArray\", {\r\n    enumerable: false,\r\n    value: function(pubFundNodes) {\r\n      const array = [];\r\n\r\n      //store for later\r\n      if (pubFundNodes) {\r\n        chart.pubFundNodes = pubFundNodes;\r\n      }\r\n\r\n      //push on the public fund nodes if they exist\r\n      if (chart.pubFundNodes) {\r\n        array.push(...chart.pubFundNodes);\r\n      }\r\n\r\n      for (let name in candidates) {\r\n        array.push(...candidateNodes[name]);\r\n      }\r\n\r\n      // sort them to prevent occlusion of smaller nodes.\r\n      return array.sort(function(a, b) {\r\n        return b.radius - a.radius;\r\n      });\r\n    }\r\n  });\r\n\r\n  return candidateNodes;\r\n}\r\n\r\nexport function createPubFundNodes() {\r\n  const radiusScale = scaleSqrt()\r\n    .domain([0, chart.maxAmount])\r\n    .range([0, chartHeight * 0.045]);\r\n\r\n  // create public funding nodes\r\n  const pubNodeDollarAmount = 5000;\r\n  let pubNodes = [];\r\n\r\n  let tiers = { ...tierLevels };\r\n  delete tiers.Totals;\r\n  delete tiers.Amounts;\r\n\r\n  for (let name in chart.nodes) {\r\n    console.log(name);\r\n    for (let tier in tiers) {\r\n      // matchedAmt is an assumed average donation size for each tier\r\n      // or 1000 beyond the lower tiers\r\n      let matchedAmt =\r\n        tier === \"_50Count\"\r\n          ? 35\r\n          : tier === \"_200Count\"\r\n          ? 125\r\n          : tier === \"_500Count\"\r\n          ? 350\r\n          : tier === \"_1kCount\"\r\n          ? 750\r\n          : 1000;\r\n      let numOfNodes = Math.round(\r\n        (totals[name][tier].count * matchedAmt) / pubNodeDollarAmount\r\n      );\r\n\r\n      for (let i = 0; i < numOfNodes; i++) {\r\n        pubNodes.push({\r\n          id: i + \"-pubfund\",\r\n          name,\r\n          radius: radiusScale(pubNodeDollarAmount),\r\n          color: \"#fce079\",\r\n          amount: pubNodeDollarAmount,\r\n          text: \"Public Fund\",\r\n          tier: tier,\r\n          x: chartWidth,\r\n          y: chartHeight\r\n        });\r\n      }\r\n    }\r\n  }\r\n  return pubNodes;\r\n}\r\n","import React, { Component } from \"react\";\r\nimport styled from \"@emotion/styled\";\r\nimport chart from \"../d3/chart\";\r\n\r\nconst ChartContainer = styled.div`\r\n  position: fixed;\r\n  left: 0;\r\n  top: 0;\r\n  display: flex;\r\n  /* justify-content: center; */\r\n  align-items: center;\r\n  margin: 0 auto;\r\n  height: 100vh;\r\n  width: 100vw;\r\n  z-index: -1;\r\n`;\r\n\r\nexport default class Chart extends Component {\r\n  componentDidMount() {\r\n    chart.init(\"#vis\", this.props.chartData);\r\n  }\r\n\r\n  shouldComponentUpdate() {\r\n    return false;\r\n  }\r\n\r\n  render() {\r\n    return <ChartContainer id=\"vis\" />;\r\n  }\r\n}\r\n","import styled from \"styled-components\";\r\n\r\nexport default styled.button`\r\n  display: inline-block;\r\n  position: relative;\r\n  border: 1px solid #555;\r\n  z-index: 5;\r\n  font-size: ${({ small }) => (small ? \"1rem\" : \"1.3rem\")};\r\n  height: ${({ small }) => (small ? \"2rem\" : \"3rem\")};\r\n  background: #fff;\r\n  font-family: inherit;\r\n  border-radius: 3px;\r\n  padding: 0 0.5rem 0;\r\n  margin-left: 10px;\r\n  cursor: pointer;\r\n  &.active {\r\n    color: #fff;\r\n    background: var(--text-color);\r\n  }\r\n`;\r\n","import React from \"react\";\r\n\r\nexport default () => (\r\n  <div>\r\n    <h1>liberal radicalism</h1>\r\n    <p>\r\n      Liberal Radicalism (a.k.a. Quadratic Finance) is a mechanism for optimally\r\n      funding public goods, developed in 2018 by Vitalik Buterin, ZoÃ« Hitzig and\r\n      E. Glen Weyl.\r\n    </p>\r\n    <p>\r\n      It has the potential to reduce chronic conflicts between democracy and\r\n      capitalism by incentivizing distributed funding of vital public goods such\r\n      as infrastructure, open-source software, scientific research, journalism,\r\n      and political campaigns.\r\n    </p>\r\n  </div>\r\n);\r\n","import React from \"react\";\r\nimport styled from \"@emotion/styled\";\r\n\r\nconst Wrap = styled.div`\r\n  /* max-width: 500px; */\r\n`;\r\n\r\nconst Quote = styled.blockquote`\r\n  position: relative;\r\n  font-size: 1.8rem;\r\n  font-style: italic;\r\n  line-height: 2.6rem;\r\n  text-align: justify;\r\n  margin-right: 0;\r\n`;\r\n\r\nconst Cite = styled.cite`\r\n  display: inline-block;\r\n  width: 100%;\r\n  font-size: 1.7rem;\r\n  text-align: right;\r\n  font-style: normal;\r\n`;\r\n\r\nexport default () => (\r\n  <Wrap>\r\n    <Quote>\r\n      Act only in accordance with that maxim through which you can at the same\r\n      time will that it become a universal law.\r\n    </Quote>\r\n    <Cite>Immanuel Kant</Cite>\r\n  </Wrap>\r\n);\r\n","import React from \"react\";\r\nimport styled from \"@emotion/styled\";\r\nimport Transition from \"react-transition-group/Transition\";\r\nimport Fade from \"react-reveal/Fade\";\r\nimport Button from \"./Button\";\r\nimport View0 from \"./View0\";\r\nimport View1 from \"./View1\";\r\nimport View5 from \"./View5\";\r\n\r\nconst Views = { 0: View0, 1: View1, 5: View5 };\r\n\r\nconst transitionStyles = {\r\n  entering: { opacity: 0 },\r\n  entered: { opacity: 1 }\r\n};\r\n\r\nconst duration = 1000;\r\n\r\nconst FullWrap = styled.div`\r\n  opacity: 0;\r\n  transition: opacity ${duration}ms ease-in-out;\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  bottom: 0;\r\n  right: 0;\r\n  /* width: 100vw;\r\n  height: 100vh; */\r\n  z-index: 1;\r\n  background: rgba(255, 255, 255, 0.9);\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: flex-end;\r\n  flex-direction: column;\r\n`;\r\n\r\nconst InnerWrap = styled.div`\r\n  height: 100%;\r\n`;\r\n\r\nconst WithBtnWrap = styled.div`\r\n  height: 100vh;\r\n  max-height: 22rem;\r\n  max-width: 40rem;\r\n  width: 80%;\r\n  margin: 0 auto;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  flex-direction: column;\r\n  position: relative;\r\n`;\r\n\r\nconst ContentWrap = styled.div`\r\n  display: ${({ display }) => display};\r\n  width: 100%;\r\n  h1 {\r\n    text-align: center;\r\n    margin-bottom: 2rem;\r\n    margin-top: 0;\r\n  }\r\n  h2 {\r\n    margin-bottom: 30px;\r\n  }\r\n  p {\r\n    text-align: justify;\r\n    font-size: 1.2rem;\r\n  }\r\n  p:last-of-type {\r\n    margin-bottom: 2rem;\r\n  }\r\n`;\r\n\r\nlet Btn = styled(Button)`\r\n  align-self: flex-end;\r\n`;\r\n\r\nclass Modal extends React.Component {\r\n  state = {\r\n    show: false\r\n  };\r\n\r\n  render() {\r\n    const { in: inProp, currentView, continueHandler } = this.props;\r\n    const nextView = (currentView, num) => {\r\n      const CurrentView = Views[num];\r\n      return (\r\n        <Fade delay={300} left opposite when={currentView === num} collapse>\r\n          <ContentWrap display={currentView === num ? \"block\" : \"none\"}>\r\n            <CurrentView />\r\n          </ContentWrap>\r\n        </Fade>\r\n      );\r\n    };\r\n\r\n    return (\r\n      <Transition in={inProp} timeout={duration} unmountOnExit>\r\n        {state => (\r\n          <FullWrap\r\n            style={{\r\n              ...transitionStyles[state]\r\n            }}\r\n          >\r\n            <WithBtnWrap>\r\n              <InnerWrap>\r\n                <Fade\r\n                  duration={500}\r\n                  left\r\n                  opposite\r\n                  when={currentView === 0}\r\n                  collapse\r\n                >\r\n                  <ContentWrap display={currentView === 0 ? \"block\" : \"none\"}>\r\n                    <View0 />\r\n                  </ContentWrap>\r\n                </Fade>\r\n                {nextView(currentView, 1)}\r\n                {nextView(currentView, 5)}\r\n              </InnerWrap>\r\n              <Btn\r\n                onClick={continueHandler}\r\n                style={{ position: \"absolute\", bottom: 0, right: 0 }}\r\n              >\r\n                Continue\r\n              </Btn>\r\n            </WithBtnWrap>\r\n          </FullWrap>\r\n        )}\r\n      </Transition>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Modal;\r\n","import React from \"react\";\r\n\r\nexport default function View5() {\r\n  return (\r\n    <div>\r\n      <p>\r\n        Liberal radicalism could alleviate this problem and reenergize\r\n        democracy.\r\n      </p>{\" \"}\r\n      <p>[LR formula]</p>{\" \"}\r\n      <p>[square of the sum of the square roots of all donations]</p>\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\n\r\nexport default {\r\n  2: (\r\n    <React.Fragment>\r\n      <p>\r\n        Imagine Alice and Bill are campaigning for political office in a\r\n        jurisdiction that uses a typical public campaign finance scheme: every\r\n        donation from supporters collected during a specified length of time is\r\n        matched dollar-for-dollar from a public fund, up to a limit per\r\n        donation. For the purposes of demonstration, we'll set the matching\r\n        limit at a generous $1,000, apportioned from a fund of $1.5 million.\r\n      </p>\r\n    </React.Fragment>\r\n  ),\r\n  3: (\r\n    <React.Fragment>\r\n      <p>\r\n        In addition to the matching limit, there would typically also be a limit\r\n        to how much any single suppporter can give (ex: $2,700 in US national\r\n        elections). The intention behind this is to guard against plutocracy.\r\n        However, limits like this can have the opposite intended effect, which\r\n        will be explained more later.\r\n      </p>\r\n      <p>\r\n        In our election, there is no donation limit, and Bill is clearly more\r\n        popular among rich patrons, benefiting from one very generous donation\r\n        of $1 million. Alice received less in total funding, however she has far\r\n        more supporters.\r\n      </p>\r\n      <p>\r\n        <em>\r\n          (Note: the circle sizes represent total dollar amounts, but the\r\n          smaller donations are grouped in bundles for browser performance\r\n          reasons)\r\n        </em>\r\n      </p>\r\n      <p>\r\n        Click \"Fund It!\" below to see how much each candidate would get when the\r\n        first $1,000 of every donation is matched.\r\n      </p>\r\n    </React.Fragment>\r\n  ),\r\n  4: (\r\n    <React.Fragment>\r\n      <p>\r\n        As the totals show, Alice received a healthy boost, but Bill is still\r\n        firmly in the lead.\r\n      </p>\r\n      <p>\r\n        While matching systems like this are effective, they come with some\r\n        problems:\r\n      </p>\r\n      <ul>\r\n        <li>\r\n          If a limit is set on how much someone can donate, wealthy donors tend\r\n          to just exert influence through less transparent channels (lobbying,{\" \"}\r\n          <a\r\n            href=\"https://www.opensecrets.org/pacs/superpacs.php\"\r\n            target=\"_blank\"\r\n          >\r\n            \"Super PACs\"\r\n          </a>\r\n          , Mar-a-Lago memberships, etc).\r\n        </li>\r\n        <li>\r\n          The matching threshold is fairly arbitrary and subject to being\r\n          changed by whoever is currently in power\r\n        </li>\r\n        <li>\r\n          Because of the reasons listed above, systems like this can cease being\r\n          useful over time if not administered well (ex: Most major U.S.\r\n          presidential candidates haven't accepted public funding since 2008\r\n          because associated limits on spending haven't been increased with\r\n          campaign costs).\r\n        </li>\r\n      </ul>\r\n    </React.Fragment>\r\n  ),\r\n\r\n  5: (\r\n    <React.Fragment>\r\n      <p>\r\n        Now let's re-run the campaign using the Liberal Radicalism mechanism.\r\n        Rather than matching each donation up to the arbitrary $1,000 threshold,\r\n        the L.R. formula will be used to determine how the public funds will be\r\n        apportioned:\r\n      </p>\r\n      <figure>\r\n        <img src=\"/img/formula.png\" alt=\"Liberal Radicalism Formula\" />\r\n        <figcaption>\r\n          (square of the sum of the square roots of all donations)\r\n        </figcaption>\r\n      </figure>\r\n      <p>\r\n        It's more simple than it might seem. Rather than dissecting the math,\r\n        let's witness its magic...\r\n      </p>\r\n    </React.Fragment>\r\n  ),\r\n  6: (\r\n    <p>\r\n      As the donation groups show, the Liberal Radical mechanism tips the\r\n      competitive balance in favor of candidates who receive more individual\r\n      donations. In this scenario, Alice would end up with a healthy lead over\r\n      Bill, which is appropriate considering she is a far more popular\r\n      candidate.\r\n    </p>\r\n  )\r\n};\r\n","import React from \"react\";\r\nimport styled from \"@emotion/styled\";\r\nimport Button from \"./Button\";\r\nimport sideText from \"./sideText\";\r\n\r\nconst Container = styled.div`\r\n  position: absolute;\r\n  top: 0;\r\n  right: 0;\r\n  width: 35vw;\r\n  padding: 3.2rem 3vw 2rem;\r\n  text-align: justify;\r\n  opacity: ${({ opacity }) => opacity};\r\n  transition: opacity 500ms ease 1500ms;\r\n  p:first-of-type {\r\n    margin-top: 0;\r\n  }\r\n  z-index: -1;\r\n  h3 {\r\n    text-align: center;\r\n  }\r\n  figure {\r\n    text-align: center;\r\n    margin-bottom: 1rem;\r\n  }\r\n  button:first-of-type {\r\n    margin-left: 0;\r\n  }\r\n  img {\r\n    width: 100%;\r\n    height: auto;\r\n  }\r\n`;\r\n\r\nconst TextWrap = styled.div`\r\n  margin-bottom: 2rem;\r\n`;\r\n\r\nconst BtnWrapper = styled.div`\r\n  width: 100%;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  margin-bottom: 1rem;\r\n`;\r\n\r\nconst MainTitle = styled.div`\r\n  width: 30vw;\r\n  z-index: 5;\r\n  position: fixed;\r\n  top: 0;\r\n  opacity: ${({ opacity }) => opacity};\r\n  transition: 500ms ease-in-out;\r\n  h1 {\r\n    margin: 0.7rem;\r\n    font-size: ${window.innerHeight < 350 ? \"1.5rem\" : \"2rem\"};\r\n    text-align: right;\r\n    color: #777;\r\n  }\r\n  background: #fff;\r\n`;\r\n\r\nexport default function SideBox({\r\n  continueHandler,\r\n  sideBoxShowing,\r\n  currentView,\r\n  donationButtonHandler,\r\n  activeDonationBtn,\r\n  backHandler,\r\n  publicFundHandler,\r\n  fundsActive\r\n}) {\r\n  const fundItOn =\r\n    (!fundsActive && currentView === 3) || (!fundsActive && currentView === 5);\r\n  const continueOn = (currentView !== 3 && currentView !== 5) || fundsActive;\r\n  return (\r\n    <Container opacity={sideBoxShowing ? 1 : 0}>\r\n      <MainTitle className=\"header-main\" opacity={currentView < 2 ? 0 : 1}>\r\n        <h1>liberal radicalism</h1>\r\n      </MainTitle>\r\n      <TextWrap>{sideText[currentView]}</TextWrap>\r\n      <BtnWrapper>\r\n        <div>\r\n          {/* {currentView > 2 && (\r\n            <Button\r\n              small={window.innerHeight < 600}\r\n              id=\"donation_all\"\r\n              onClick={donationButtonHandler}\r\n              className={activeDonationBtn && \"active\"}\r\n            >\r\n              Toggle Donations\r\n            </Button>\r\n          )} */}\r\n        </div>\r\n        <div>\r\n          {/* {currentView > 2 && <Button onClick={backHandler}>Back</Button>} */}\r\n          {fundItOn && <Button onClick={publicFundHandler}>Fund It!</Button>}\r\n          {continueOn && <Button onClick={continueHandler}>Continue</Button>}\r\n        </div>\r\n      </BtnWrapper>\r\n    </Container>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport styled from \"@emotion/styled\";\r\n\r\nconst Wrap = styled.div`\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  width: 100vw;\r\n  height: 100vh;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n`;\r\n\r\nexport default function LandscapeMessage() {\r\n  return (\r\n    <Wrap>\r\n      <p>Please rotate your device ð</p>\r\n    </Wrap>\r\n  );\r\n}\r\n","export function debounce(func, wait, immediate) {\r\n  var timeout;\r\n  return function() {\r\n    var context = this,\r\n      args = arguments;\r\n    var later = function() {\r\n      timeout = null;\r\n      if (!immediate) func.apply(context, args);\r\n    };\r\n    var callNow = immediate && !timeout;\r\n    clearTimeout(timeout);\r\n    timeout = setTimeout(later, wait);\r\n    if (callNow) func.apply(context, args);\r\n  };\r\n}\r\n\r\nexport function checkLandscape() {\r\n  return window.innerHeight < window.innerWidth;\r\n}\r\n","import React, { Component } from \"react\";\nimport Chart from \"./components/Chart\";\nimport Modal from \"./components/Modal\";\nimport SideBox from \"./components/SideBox\";\nimport LandscapeMessage from \"./components/LandscapeMessage\";\nimport chart from \"./d3/chart\";\nimport { debounce, checkLandscape } from \"./helpers/helpers\";\nimport { wait } from \"./d3/config\";\nimport chartData from \"./data/fakePrimaryJSON\";\n// import { buildDataArray } from \"./dataBuilder\";\nimport \"./styles/bubble_chart.css\";\n\nconst initState = {\n  activeDonationBtn: false,\n  currentView: 0,\n  modalShowing: false,\n  animDelay: 0,\n  landscape: true,\n  chartLoaded: false,\n  sideBoxShowing: false,\n  fundsActive: false\n};\n\nclass App extends Component {\n  state = { ...initState };\n\n  async componentDidMount() {\n    this.checkOrientation();\n\n    window.addEventListener(\"resize\", debounce(this.checkOrientation, 100));\n\n    await wait(1200);\n\n    this.setState({ modalShowing: true });\n\n    // const dataArray = buildDataArray();\n    // console.log(dataArray);\n    // console.log(JSON.stringify(dataArray));\n  }\n\n  checkOrientation = () => {\n    const landscape = checkLandscape();\n\n    this.setState({ landscape });\n  };\n\n  async componentDidUpdate(prevProps, prevState) {\n    const {\n      currentView,\n      activeDonationBtn,\n      animDelay,\n      landscape,\n      fundsActive\n    } = this.state;\n\n    if (!landscape) return;\n    if (landscape && !prevState.landscape) {\n      window.location.reload();\n    }\n\n    if (!animDelay) {\n      chart.render({ currentView, activeDonationBtn, fundsActive });\n    } else {\n      await wait(animDelay);\n      chart.render({ currentView, activeDonationBtn, fundsActive });\n    }\n  }\n\n  donationButtonHandler = e => {\n    this.setState({ activeDonationBtn: !this.state.activeDonationBtn });\n  };\n\n  continueHandler = e => {\n    const { currentView } = this.state;\n    const newView = currentView + 1;\n    this.setState({\n      currentView: newView\n    });\n\n    if (newView === 2) {\n      this.setState({\n        animDelay: 0,\n        modalShowing: false,\n        activeDonationBtn: false,\n        sideBoxShowing: true\n      });\n    }\n    if (newView > 2) {\n      window.scrollTo(0, 0);\n    }\n\n    // if (newView !== 4 && newView < 6) {\n    //   this.setState({ fundsActive: false });\n    // }\n  };\n\n  backHandler = () => {\n    if (this.state.currentView < 3) return;\n    this.setState({\n      currentView: this.state.currentView - 1\n    });\n  };\n\n  publicFundHandler = () => {\n    this.setState({\n      fundsActive: true,\n      currentView: this.state.currentView + 1\n    });\n  };\n\n  render() {\n    const {\n      currentView,\n      landscape,\n      modalShowing,\n      sideBoxShowing,\n      activeDonationBtn,\n      fundsActive\n    } = this.state;\n\n    console.log(\"currentView: \", currentView);\n    return !landscape ? (\n      <LandscapeMessage />\n    ) : (\n      <React.Fragment>\n        <Chart chartData={chartData} currentView={currentView} />\n        <Modal\n          in={modalShowing}\n          currentView={currentView}\n          continueHandler={this.continueHandler}\n        />\n        <SideBox\n          continueHandler={this.continueHandler}\n          backHandler={this.backHandler}\n          sideBoxShowing={sideBoxShowing}\n          currentView={currentView}\n          donationButtonHandler={this.donationButtonHandler}\n          activeDonationBtn={activeDonationBtn}\n          publicFundHandler={this.publicFundHandler}\n          fundsActive={fundsActive}\n        />\n        {/* <button\n          onClick={this.continueHandler}\n          style={{ position: \"absolute\", right: 0, bottom: 0 }}\n        >\n          continue\n        </button> */}\n      </React.Fragment>\n    );\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { hot } from \"react-hot-loader\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport * as serviceWorker from \"./serviceWorker\";\n\nconst root = document.getElementById(\"root\");\n\n// const HotApp = hot(module)(App);\n\nReactDOM.render(<App />, root);\n\n// if (module.hot) {\n//   module.hot.accept(\"./App\", () => {\n//     const NextApp = require(\"./App\").default;\n//     ReactDOM.render(<NextApp />, root);\n//   });\n// }\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}